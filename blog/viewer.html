<!DOCTYPE html>
<html>

<head>
  <title>Blog Post</title>
  <link rel="stylesheet" href="../styles.css">
  <!-- Include a tiny markdown parser -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
  <script>
    async function loadPost() {
      const urlParams = new URLSearchParams(window.location.search);
      const postSlug = urlParams.get('post');

      if (!postSlug) {
        document.getElementById('post-content').innerHTML = '<p>Post not found</p>';
        return;
      }

      try {
        const response = await fetch(`./posts/${postSlug}`);
        if (!response.ok) throw new Error('Post not found');

        const markdown = await response.text();
        const html = marked.parse(markdown);

        document.getElementById('post-content').innerHTML = html;

        // Try to extract title from markdown for page title
        const titleMatch = markdown.match(/^# (.+)$/m);
        if (titleMatch) {
          document.title = titleMatch[1];
        }
      } catch (err) {
        console.error(err);
        document.getElementById('post-content').innerHTML = '<p>Error loading post</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadPost);
  </script>
</head>

<body>
  <header>
    <a href="./index.html">‚Üê Back to Blog</a>
  </header>
  <article id="post-content">
    Loading...
  </article>
</body>

</html>